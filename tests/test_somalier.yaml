- name: Somalier extract
  tags:
    - task_level
    - extract
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/somalier/extract_inputs.json --task extract somalier.wdl
  exit_code: 0
  files:
    - path: out-miniwdl/work/A161161.somalier
      should_exist: true
      md5sum: 00c32b4f5b011e3829934636cc624602

- name: Somalier relate
  tags:
    - task_level
    - relate
    - infer
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/somalier/relate-several_inputs.json --task relate somalier.wdl
  exit_code: 0
  files:
    - path: out-miniwdl/work/somalier_relate.pairs.tsv
      should_exist: true
      md5sum: d0493333673f742ac16cd5fd8ac1e1df
    - path: out-miniwdl/work/somalier_relate.samples.tsv
      should_exist: true
      md5sum: b35083bd6be6a4332b089175de0d030e
    - path: out-miniwdl/work/somalier_relate.html
      should_exist: true
      md5sum: 6c33ea334936aab72ced5e4629017e4d

- name: Somalier relate PED
  tags:
    - task_level
    - relate
    - ped
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/somalier/relate-several_inputs.json --task relate somalier.wdl ped=tests/somalier/simple.ped
  exit_code: 0
  files:
    - path: out-miniwdl/work/somalier_relate.pairs.tsv
      should_exist: true
      md5sum: d58270c0154f718e1faab92b3995d19e
    - path: out-miniwdl/work/somalier_relate.samples.tsv
      should_exist: true
      md5sum: 0db4c75080142f57c57f9d564f7550b8
    - path: out-miniwdl/work/somalier_relate.html
      should_exist: true
      md5sum: f99dd5d7e24f4fbfd57933ca302213a7
    - path: out-miniwdl/work/somalier_relate.custom.tsv
      should_exist: true
      md5sum: fe718e383abb0b92e492ce322d44e1a4

- name: Somalier relate duplicated PED
  tags:
    - task_level
    - relate
    - ped
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/somalier/relate-several_inputs.json --task relate somalier.wdl ped=tests/somalier/duplicated.ped
  exit_code: 0
  files:
    - path: out-miniwdl/work/somalier_relate.pairs.tsv
      should_exist: true
      md5sum: d58270c0154f718e1faab92b3995d19e
    - path: out-miniwdl/work/somalier_relate.samples.tsv
      should_exist: true
      md5sum: 0db4c75080142f57c57f9d564f7550b8
    - path: out-miniwdl/work/somalier_relate.html
      should_exist: true
      md5sum: f99dd5d7e24f4fbfd57933ca302213a7
    - path: out-miniwdl/work/somalier_relate.custom.tsv
      should_exist: true
      md5sum: fe718e383abb0b92e492ce322d44e1a4
