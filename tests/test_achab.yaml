- name: Achab newHope solo
  tags:
    - task_level
    - solo
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/achab/solo_inputs.json --task achab achab.wdl NewHope=true
  exit_code: 0
  files:
    - path: out-miniwdl/out/outAchab/A161161_achab_catch_newHope.xlsx
      should_exist: true
      # md5sum: Cannot checksum Excel file directly
    - path: out-miniwdl/out/outAchab/A161161_achab_catch.xlsx
      should_exist: false
    - path: out-miniwdl/out/outAchabHTML/A161161_newHope_achab.html
      should_exist: true
      # md5sum: Cannot checksum Achab HTML output (problem with random rows order again ?)
    - path: out-miniwdl/out/outAchabMetrix/A161161_achab_catch_newHope.metrix.tsv
      should_exist: true
      md5sum: 2505790e49eaa97f610a66e4d325d593

- name: Achab newHope child with parents
  tags:
    - task_level
    - trio
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/achab/trio_inputs.json --task achab achab.wdl NewHope=true
  exit_code: 0
  files:
    - path: out-miniwdl/out/outAchab/CSG196372_achab_catch_newHope.xlsx
      should_exist: true
      # md5sum: Cannot checksum Excel file directly
    - path: out-miniwdl/out/outAchab/CSG196372_achab_catch.xlsx
      should_exist: false
    - path: out-miniwdl/out/outAchabHTML/CSG196372_newHope_achab.html
      should_exist: true
      # md5sum: Cannot checksum Achab HTML output (problem with random rows order again ?)
    - path: out-miniwdl/out/outAchabMetrix/CSG196372_achab_catch_newHope.metrix.tsv
      should_exist: true
      md5sum: f6e54d882b9b19830878e9b36ea3e6e9

- name: Achab catch child with parents
  tags:
    - task_level
    - trio
  # 'NewHope' param is at 'false' by default
  command: miniwdl run -d out-miniwdl/. --no-cache --verbose --no-quant-check --cfg tests/sing.cfg --input tests/achab/trio_inputs.json --task achab achab.wdl
  exit_code: 0
  files:
    - path: out-miniwdl/out/outAchab/CSG196372_achab_catch_newHope.xlsx
      should_exist: false
    - path: out-miniwdl/out/outAchab/CSG196372_achab_catch.xlsx
      should_exist: true
      # md5sum: Cannot checksum Excel file directly
    - path: out-miniwdl/out/outAchabHTML/CSG196372_achab.html
      should_exist: true
      # md5sum: Cannot checksum Achab HTML output (problem with random rows order again ?)
    - path: out-miniwdl/out/outAchabMetrix/CSG196372_achab_catch.metrix.tsv
      should_exist: true
      md5sum: d1c20b9b684a00fb8bd6261f49b2a4f7
